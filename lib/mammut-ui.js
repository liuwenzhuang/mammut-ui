!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("regularjs"),require("lodash")):"function"==typeof define&&define.amd?define(["regularjs","lodash"],t):"object"==typeof exports?exports.MammutUI=t(require("regularjs"),require("lodash")):e.MammutUI=t(e.Regular,e._)}(window,function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.setRegular=function(e){i=e},e.extend=function(t){for(var n=new t,o=Object.create({}),s=n;s&&s.constructor!==e;)Object.keys(s).forEach(function(e){o[e]=s[e]}),s=s.__proto__;return delete o.constructor,i.extend(o)},e.prototype.config=function(e){},e.prototype.init=function(e){},e.prototype.destroy=function(){},e.prototype.supr=function(){},e.prototype.$watch=function(e,t){return 0},e.prototype.$unwatch=function(e){},e.prototype.$on=function(e,t){},e.prototype.$off=function(e,t){},e.prototype.$emit=function(e,t){},e.prototype.$ref=function(e){return this.$refs[e]},e.prototype.$inject=function(e){},e}();t.RegularT=o},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1));t.transformStyles=function(e){return e=Object.assign({},e),["top","left","right","bottom"].forEach(function(t){o.default.isString(e[t])||(isNaN(e[t])&&delete e[t],o.default.isNumber(e[t])&&(e[t]+="px"))}),e}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(5);var o=i(n(0));n(2).RegularT.setRegular(o.default);var s=n(6);t.Overlay=s.Overlay;var l=n(9);t.Menu=l.Menu;var r=n(12);t.List=r.List;var u=n(15);t.Input=u.Input;var a=n(18);t.PopupMenu=a.PopupMenu;var c=n(20);t.Cascader=c.Cascader;var d=n(24);t.Tooltip=d.Tooltip,t.TooltipComponent=d.TooltipComponent},function(e,t,n){},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),s=i(n(7)),l=i(n(8));t.Overlay=o.default.extend({template:s.default,name:"ui-cdk-overlay",config:function(e){this.data=Object.assign({disabledScroll:!0,styles:l.default},e)},handleMousedown:function(e){this.$emit("mousedown",e)},handleScroll:function(e){this.data.disabledScroll&&e.preventDefault(),this.$emit("scroll",e)}})},function(e,t){e.exports='<div class="{styles.overlay}" on-mousedown="{this.handleMousedown($event)}" on-mousewheel="{this.handleScroll($event)}">\n    {#include this.$body}\n</div>\n'},function(e,t,n){e.exports={overlay:"overlay--136lB"}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),l=i(n(10)),r=i(n(11)),u=o(n(1)),a=s.default.dom;t.Menu=s.default.extend({template:l.default,name:"ui-cdk-menu",config:function(e){this.data=Object.assign({styles:r.default},e)},init:function(){this.$watch("selected",function(e){if(e){var t=this.data.menu.map(function(t){var n={selected:-1!==e.indexOf(t.key),children:[]};return t.children&&(n.children=t.children.map(function(t){var i=-1!==e.indexOf(t.key);return n.selected=n.selected||i,u.merge(t,{selected:i})})),u.merge(t,n)});this.$update({menu:t})}})},computed:{hasDesc:function(e){return 0!==e.menu.filter(function(e){return e.desc}).length}},checkBoundary:function(e){var t=a.element(this.$refs["children"+e]);t.classList.remove("pull-left","pull-up");var n=t.getBoundingClientRect();n.right>window.innerWidth&&t.classList.add("pull-left"),n.bottom>window.innerHeight&&t.classList.add("pull-up")},click:function(e,t){e.stopPropagation(),t.disabled||this.$emit("click",t)}})},function(e,t){e.exports='<ul class="{styles.menu}" r-class={{\'has-desc\':hasDesc}} ref="menu">\n    {#list menu as item}\n    {#if item.children && item.children.length}\n    <li class="{styles.item} {styles.parent}"\n        r-class="{{\'disabled\': item.disabled, \'selected\': item.selected}}"\n        on-mouseenter="{this.checkBoundary(item_index)}"\n        on-mousedown="{this.click($event, item)}">{item.title}\n        <ul class="{styles.children}" ref="{\'children\' + item_index}">\n            {#list item.children as childrenItem}\n            {#if childrenItem.title}\n            <li class="{styles.item}"\n                r-class="{{\'disabled\': childrenItem.disabled}}"\n                on-mousedown="{this.click($event, childrenItem)}">\n                <span>{childrenItem.title}</span>\n                <span class="{styles.desc}">{childrenItem.desc}</span>\n            </li>\n            {#elseif childrenItem.divider}\n            <li class="{styles.divider}"></li>\n            {/if}\n            {/list}\n        </ul>\n    </li>\n    {#else}\n    {#if item.title}\n    <li class="{styles.item}"\n        r-class="{{\'disabled\':item.disabled, \'has-desc\':item.desc, \'selected\': item.selected}}"\n        on-mousedown="{this.click($event, item)}">\n        <span> {item.title}</span>\n        <span class="{styles.desc}">{item.desc}</span>\n    </li>\n    {#elseif item.divider}\n    <li class="{styles.divider}"></li>\n    {/if}\n    {/if}\n    {/list}\n</ul>\n'},function(e,t,n){e.exports={menu:"menu--3goiy",children:"children--3yeXQ",parent:"parent--3WrEW",item:"item--Nh0ae"}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),s=i(n(13)),l=i(n(14)),r=i(n(1));t.List=o.default.extend({template:s.default,name:"ui-cdk-list",config:function(e){this.data=r.default.merge({styles:l.default,options:[]},e)},handleMousedown:function(e){this.$emit("mousedown",e)},handleClick:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.$emit("click",e)}})},function(e,t){e.exports='<div class="{styles.list} ui-cdk-list" on-mousedown="{this.handleMousedown($event)}">\n    {#list options as item}\n        {#include itemTpl}\n    {/list}\n</div>\n'},function(e,t,n){e.exports={list:"list--3wVW4"}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),s=i(n(1)),l=i(n(16)),r=i(n(17));t.Input=o.default.extend({template:l.default,name:"ui-cdk-input",config:function(e){this.data=s.default.merge({styles:r.default,disabled:!1,active:!1,type:"text",name:"",id:"",value:"",showTriangle:!1},e)},handleClick:function(e){this.$emit("click",e)},$getElement:function(){return this.$refs.input}})},function(e,t){e.exports='<div class="{size} {styles.inputWrap} ui-cdk-input-wrap">\n    <input\n            ref="input"\n            type="{type}"\n            class="{styles.input} ui-cdk-input"\n            name="{name}"\n            id="{id}"\n            r-class="{{\'disabled\': disabled, \'active\': active, \'error\': error}}"\n            r-model="{value}"\n            on-click="{this.handleClick($event)}"\n            {#if disabled}disabled{/if}\n    >\n    {#if showTriangle}\n    <i class="{styles.triangle}" r-class="{{\'active\': active}}"></i>\n    {/if}\n</div>\n'},function(e,t,n){e.exports={input:"input--2Socj",inputWrap:"inputWrap--2TOQo",triangle:"triangle--2Dw4k"}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),s=i(n(1)),l=i(n(19)),r=n(3),u=o.default.dom;t.PopupMenu=o.default.extend({template:l.default,name:"ui-popup-menu",config:function(e){this.data=Object.assign({scrollHide:!1},e)},init:function(e){var t=u.element(this.$refs.menu);t.style.top=e.position.top,t.style.left=e.position.left},handleOverlayMousedown:function(){this.$emit("hide")},handleOverlayScroll:function(e){u.element(this.$refs.menu).contains(e.target)||this.data.scrollHide&&this.$emit("hide")},handleMenuClick:function(e){e.children||this.$emit("click",e)}}),t.PopupMenu.show=function(e,n,i){return s.default.isObject(i)||(i={}),e=r.transformStyles(e),new Promise(function(o){var s=new t.PopupMenu({data:Object.assign({menu:n,position:e},i)}).$inject(document.body);s.$on("hide",function(){s.destroy(),o(null)}),s.$on("click",function(e){s.destroy(),o(e)})})}},function(e,t){e.exports='<ui-cdk-overlay\n        ref="overlay"\n        disabledScroll="{!scrollHide}"\n        on-mousedown="{this.handleOverlayMousedown($event)}"\n        on-scroll="{this.handleOverlayScroll($event)}"\n>\n    <ui-cdk-menu\n            ref="menu"\n            menu="{menu}"\n            on-click="{this.handleMenuClick($event)}"\n    ></ui-cdk-menu>\n</ui-cdk-overlay>\n'},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),s=i(n(1)),l=i(n(21)),r=i(n(22)),u=i(n(23)),a=n(3);t.Cascader=o.default.extend({template:l.default,name:"ui-cascader",config:function(e){this.data=Object.assign({styles:r.default,itemTemplate:u.default,menuVisible:!1,showOptions:[],selected:[],position:{top:0,left:0},displayText:"",disabled:!1,displayRender:function(e){return e.map(function(e){return e.label}).join(" / ")},options:[],size:"normal"},e)},init:function(){if(this.data.selected.length>0){var e=this.computeSelectedLabel(this.data.selected);this.$update({displayText:e})}},computePosition:function(){var e=this.$refs.input.$getElement().getBoundingClientRect(),t=e.x,n=e.y,i=e.height;return a.transformStyles({left:t,top:n+i+4})},computeShowMenu:function(e){var t=this.data.options,n=[];n.push(t);for(var i=function(t,i){var o=e[t],l=s.default.find(n[t],function(e){return e.value===o});l&&l.children&&n.push(l.children)},o=0,l=e.length;o<l;o++)i(o);return n},computeSelectedLabel:function(e){var t=this.data.options,n=s.default.clone(t),i=e.map(function(e){var t=s.default.find(n,function(t){return t.value===e});return n=t.children,t});return this.data.displayRender(i)},handleShowMenu:function(){var e=this.data.selected,t=this.computePosition(),n=this.computeShowMenu(e);this.$update({position:t,showOptions:n,menuVisible:!0})},handleHideMenu:function(){this.data.menuVisible=!1},handleMousedown:function(e){e.stopPropagation()},handleClickItem:function(e){var t=e[1],n=e[2];if(!t.disabled){var i=this.data.selected;if(i=[].concat(i.slice(0,n),t.value),t.children){var o=this.computeShowMenu(i);this.$update({showOptions:o,selected:i})}else{var s=this.computeSelectedLabel(i);this.$update({displayText:s,selected:i}),this.$emit("change",i),this.handleHideMenu()}}}})},function(e,t){e.exports='<div class="{styles.cascader}" ref="wrap">\n    <ui-cdk-input\n            ref="input"\n            size="{size}"\n            value="{displayText}"\n            disabled="{disabled}"\n            showTriangle="{true}"\n            active="{menuVisible}"\n            on-click="{this.handleShowMenu($event)}"\n    ></ui-cdk-input>\n    {#if menuVisible}\n    <ui-cdk-overlay on-mousedown="{this.handleHideMenu()}">\n        <div class="{styles.menu}" r-style="{position}">\n            {#list showOptions as item}\n            <ui-cdk-list\n                    styles="{styles}"\n                    itemTpl="{itemTemplate}"\n                    options="{item}"\n                    index="{item_index}"\n                    selected="{selected[item_index]}"\n                    on-mousedown="{this.handleMousedown($event)}"\n                    on-click="{this.handleClickItem($event)}"\n            ></ui-cdk-list>\n            {/list}\n        </div>\n    </ui-cdk-overlay>\n    {/if}\n</div>\n'},function(e,t,n){e.exports={menu:"menu--1EKeJ",item:"item--28--K",children:"children--18OZT"}},function(e,t){e.exports="<div\n        class=\"{styles.item}\"\n        r-class=\"{{'has-children': item.children !== undefined, 'active': selected === item.value, 'disabled': item.disabled}}\"\n        on-click=\"{this.handleClick($event, item, index)}\"\n>{item.label}</div>\n"},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),r=s(n(0)),u=s(n(25)),a=s(n(26)),c=r.default.extend({template:'<div ref="context" class="{styles.tooltipContext} tooltip-{placement}">{#include title}</div>',data:{styles:a.default},init:function(){this.bindEvent()},destroy:function(){this.offEvent(),this.supr()},bindEvent:function(){var e=this,t=this.$refs.context;this.mouseenterHandle=function(){e.$emit("enter")},this.mouseenterOut=function(){e.$emit("out")},t.addEventListener("mouseenter",this.mouseenterHandle),t.addEventListener("mouseout",this.mouseenterOut)},offEvent:function(){var e=this.$refs.context;e.removeEventListener("mouseenter",this.mouseenterHandle),e.removeEventListener("mouseout",this.mouseenterOut)},$show:function(e){switch(this.data.placement){case"top":this.computePlacementTop(e);break;case"bottom":this.computePlacementBottom(e);break;case"left":this.computePlacementLeft(e);break;case"right":this.computePlacementRight(e)}},$hide:function(){var e=this.$refs.context;e.style.left="-9999px",e.style.top="-9999px"},computePlacementLeft:function(e){var t=this.$refs.context,n=e.top+(e.height-t.offsetHeight)/2,i=e.left+-(t.offsetWidth+10);t.style.top=n+"px",t.style.left=i+"px"},computePlacementRight:function(e){var t=this.$refs.context,n=e.top+(e.height-t.offsetHeight)/2,i=e.left+e.width+10;t.style.top=n+"px",t.style.left=i+"px"},computePlacementTop:function(e){var t=this.$refs.context,n=e.top-(t.offsetHeight+10),i=e.left+(e.width-t.offsetWidth)/2;t.style.top=n+"px",t.style.left=i+"px"},computePlacementBottom:function(e){var t=this.$refs.context,n=e.top+e.height+10,i=e.left+(e.width-t.offsetWidth)/2;t.style.top=n+"px",t.style.left=i+"px"}}),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.template=u.default,t.name="ui-tooltip",t.tooltipWrapRef=null,t.tooltipContext=null,t.showTooltipHandle=null,t.hideTooltipHandle=null,t.showTooltipTimer=null,t.hideTooltipTimer=null,t.data={title:"",placement:"top",visible:!1,styles:a.default,trigger:"hover"},t}return o(t,e),t.prototype.config=function(e){var t=this;this.tooltipContext=new c({data:e}),this.tooltipContext.$inject(document.body),this.tooltipContext.$on("enter",function(){t.clearTimer()}),this.tooltipContext.$on("out",function(){t.hideTooltip()})},t.prototype.init=function(e){this.tooltipWrapRef=this.$refs.wrap,this.initEvent()},t.prototype.destroy=function(){this.tooltipContext.destroy(),this.offEvent(),this.supr()},t.prototype.initEvent=function(){var e=this,t=this.data.trigger;switch(this.showTooltipHandle=function(){e.showTooltip()},this.hideTooltipHandle=function(){e.hideTooltip()},t){case"click":break;case"hover":this.tooltipWrapRef.addEventListener("mouseenter",this.showTooltipHandle),this.tooltipWrapRef.addEventListener("mouseout",this.hideTooltipHandle)}},t.prototype.offEvent=function(){switch(this.data.trigger){case"click":break;case"hover":this.tooltipWrapRef.removeEventListener("mouseenter",this.showTooltipHandle),this.tooltipWrapRef.removeEventListener("mouseout",this.hideTooltipHandle)}},t.prototype.clearTimer=function(){this.hideTooltipTimer&&(clearTimeout(this.hideTooltipTimer),this.hideTooltipTimer=null),this.showTooltipTimer&&(clearTimeout(this.showTooltipTimer),this.showTooltipTimer=null)},t.prototype.showTooltip=function(){var e=this,t=this.tooltipWrapRef.getBoundingClientRect();this.clearTimer(),this.showTooltipTimer=setTimeout(function(){e.tooltipContext.$show(t)},100)},t.prototype.hideTooltip=function(){var e=this;this.clearTimer(),this.hideTooltipTimer=setTimeout(function(){e.tooltipContext.$hide()},100)},t}(l.RegularT);t.TooltipComponent=d,t.Tooltip=l.RegularT.extend(d)},function(e,t){e.exports='<div class="{styles.tooltipWrap}" ref="wrap">\n    {#include this.$body}\n</div>\n'},function(e,t,n){e.exports={tooltipWrap:"tooltipWrap--1pP35",tooltipContext:"tooltipContext--1Ccrh"}}])});
//# sourceMappingURL=mammut-ui.js.map